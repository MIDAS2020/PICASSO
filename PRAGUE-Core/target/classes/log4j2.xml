<?xml version="1.0" encoding="UTF-8"?>
<configuration status="OFF">
  <properties>
    <property name="layout">%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %C{1} %M %L | %msg%xEx%n</property>
  </properties>
  <appenders>
    <Console name="Console" target="SYSTEM_OUT">
      <ThresholdFilter level="warn" onMatch="DENY" onMismatch="ACCEPT" />
      <PatternLayout pattern="${layout}" />
    </Console>
    <Console name="StdErr" target="SYSTEM_ERR">
      <ThresholdFilter level="warn" onMatch="ACCEPT" onMismatch="DENY" />
      <PatternLayout pattern="${layout}" />
    </Console>
    <File name="log" fileName="prague.log">
      <PatternLayout pattern="${layout}" />
    </File>

    <Routing name="Routing">
      <Routes pattern="$${ctx:builderName}">
        <Route>
          <RollingFile name="Rolling-${ctx:builderName}"
                       fileName="${ctx:builderName}-${date:yyyy-MM-dd}.log"
                       filePattern="${ctx:builderName}-${date:yyyy-MM-dd}-%i.log">
            <PatternLayout>
              <pattern>${layout}</pattern>
            </PatternLayout>
            <OnStartupTriggeringPolicy />
            <TimeBasedTriggeringPolicy />
          </RollingFile>
        </Route>
      </Routes>
    </Routing>
  </appenders>

  <loggers>
    <Logger name="prague.index.IndexBuilder" level="info" additivity="false">
      <appender-ref ref="Console" />
      <appender-ref ref="StdErr" />
      <AppenderRef ref="Routing" />
    </Logger>

    <root level="trace">
      <appender-ref ref="Console" />
      <appender-ref ref="StdErr" />
      <appender-ref ref="log" />
    </root>
  </loggers>
</configuration>